name: Restrict Merge Access

on:
  pull_request:
    branches:
      - main
     
    types: [opened, reopened, synchronize, ready_for_review]

jobs:
  restrict-merge:
    runs-on: ubuntu-latest
    steps:
      - name: üîç Check if user is allowed to merge
        run: |
          ALLOWED_USERS=("sanchaljustgrow" "admin2")  # ‚úÖ Replace with your GitHub usernames
          echo "Pull request opened by: ${{ github.actor }}"
          if [[ ! " ${ALLOWED_USERS[@]} " =~ " ${GITHUB_ACTOR} " ]]; then
            echo "‚ùå User '${GITHUB_ACTOR}' is not allowed to merge into this branch."
            exit 1
          else
            echo "‚úÖ User '${GITHUB_ACTOR}' is allowed to merge."
          fi
