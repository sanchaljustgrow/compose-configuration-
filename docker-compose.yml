services:
  angular-frontend:
    image: sanchaljustgrow/docker-testnew-frontend:latest
    container_name: angular-frontend
    ports:
      - "8080:80"
    environment:
      NG_APP_URL: "https://dummyjson.com/products/2"
      APP_ENV: "production"
      CONFIG_FILE: "/usr/share/nginx/html/assets/config.json"
      TARGET: "docker"
    volumes:
      - ./config/config.json:/usr/share/nginx/html/assets/config.json:ro
    command: >
      sh -c "
        echo 'ðŸš€ Starting container...';
        if [ -f /usr/share/nginx/html/assets/config.json ]; then
          echo 'âœ… Found config.json:'; cat /usr/share/nginx/html/assets/config.json;
        else
          echo 'âš ï¸ No config.json found, creating default one...';
          echo '{\"NG_APP_URL\":\"https://dummyjson.com/products/1\"}' > /usr/share/nginx/html/assets/config.json;
        fi;
        nginx -g 'daemon off;';
      "
